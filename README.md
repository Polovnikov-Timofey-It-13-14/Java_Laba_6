# Java_Laba_6

Выполнил Половников Тимофей

В лабораторной работе реализовано выполнение всех 8 заданий. Для их выполнения создано:

1. Класс Main с вызовом всех задач и пользовательским интерфейсом

2. Аннотация Invoke, класс Human и класс InvokeAnnotation для 1 задания

3. Аннотация Default, класс Student и класс DefaultAnnotation для 2 задания

4. Аннотация ToString, класс Employee и класс ToStringAnnotation для 3 задания

5. Аннотация Validate, класс User и класс ValidateAnnotation для 4 задания

6. Аннотация Two, класс Car и класс TwoAnnotation для 5 задания

7. Аннотация Cache, класс BankAccount и класс TwoAnnotation для 6 задания

8. Класс InvokeAnnotationTest для выполнения 7 задания

9. Класс TwoAnnotationTest, TwoFirst, TwoSecond для выполнения 8 задания

10. Также содержится класс Valid в котором есть методы для проверки на правильный ввод

Задачи и их решения:

***
1 задание (Задача 1)

@Invoke.
Разработайте аннотацию @Invoke, со следующими характеристиками:

• Целью может быть только МЕТОД

• Доступна во время исполнения программы

• Не имеет свойств

Создайте класс, содержащий несколько методов, и проаннотируйте хотя бы один из них аннотацией @Invoke. Реализуйте обработчик (через Reflection API), который находит методы, отмеченные аннотацией @Invoke, и вызывает их автоматически.

Задача решается созданием нескольких файлов: аннотации @Invoke, класса Human и класса InvokeAnnotation. 

Аннотация @Invoke содержит в себе:

-ElementType.METHOD - аннотация может применяться только к методам

-RetentionPolicy.RUNTIME - аннотация доступна только во время выполнения программы

Класс Human содержит в себе:

- 2 конструктора

- Геттеры и Сеттеры для каждого из полей

- Метод для того, чтобы человек поздоровался

- Метод для того, чтоб человек представился и выразил настроение

- Метод для проверки на совершеннолетие

- Метод для празднования дня рождения

- toString для вывода человека

Класс InvokeAnnotation содержит:

- Метод для поиска аннотации @Invoke

- Метод для обработки методов с аннотацией @Invoke

- Метод для выставления значений по умолчанию для разных типов данных

Решение задачи:

Перебор всех методов класса

Проверка наличия @Invoke аннотации

Автоматический вызов методов с обработкой параметров

Обработка возвращаемых значений

В мейне создается человек (Имя и возраст вводится с клавиатуры и проводится проверка на ввод). После выполняются все методы которые помечены аннотацией @Invoke и выводится их количество. 

Пример вывода:

1 Задание

Введите имя человека: Ваня

Введите возраст человека: 20

Всего методов в классе: 9

Найден метод с @Invoke: celebrateBirthday (параметры: 0)

С днем рождения, Ваня! Теперь тебе 21 лет.

Метод успешно вызван

Найден метод с @Invoke: introduce (параметры: 1)

Меня зовут Ваня, мне 21 лет. Настроение: null

Результат метода: Меня зовут Ваня, мне 21 лет. Настроение: null

Метод успешно вызван

Найден метод с @Invoke: sayHello (параметры: 0)

Ваня говорит: Привет! Мне 21 лет.

Метод успешно вызван

Найден метод с @Invoke: checkAdult (параметры: 0)

Ваня совершеннолетний(яя)

Метод успешно вызван

Вызвано методов: 4
***

(Задача 2)

@Default.

Разработайте аннотацию @Default, со следующими характеристиками:

• Целью может быть ТИП или ПОЛЕ

• Доступна во время исполнения программы

• Имеет обязательное свойство value типа Class

Проаннотируйте какой-либо класс данной аннотацией, указав тип по умолчанию. Напишите обработчик, который выводит имя указанного класса по умолчанию.

Задача решается созданием нескольких файлов: аннотации @Default, класса Student и класса DefaultAnnotation.

Аннотация @Default содержит в себе:

- ElementType.TYPE, ElementType.FIELD - аннотация может применяться к классам и полям

- RetentionPolicy.RUNTIME - аннотация доступна во время выполнения программы

- Class<?> value() - обязательное свойство для указания класса по умолчанию

Класс Student

Содержание:

- 2 конструктора (по умолчанию и параметризованный)

- Поля: name (String), course (int)

- Геттеры для доступа к полям

- toString() метод для строкового представления

Класс DefaultAnnotation:

- Поле с факультетом студента

- Конструктор

- Геттер

- Метод для обработки

Решение задачи:

- Получение класса для анализа через DefaultAnnotation.class

- Проверка наличия аннотации @Default

- Извлечение аннотации

- Получение значений

- Вывод информации

В мейне выводится класс который имеет @Default аннотацию и класс по умолчанию.

Пример вывода:

2 Задание

Класс DefaultAnnotation имеет @Default аннотацию

Класс по умолчанию: Student

Простое имя: Student
***

(Задача 3)

@ToString.

Разработайте аннотацию @ToString, со следующими характеристиками:

• Целью может быть ТИП или ПОЛЕ

• Доступна во время исполнения программы

• Имеет необязательное свойство valuec двумя вариантами значений: YES или NO

• Значение свойства по умолчанию: YES

Проаннотируйте класс аннотацией @ToString, а одно из полей – с @ToString(Mode.NO). Создайте метод, который формирует строковое представление объекта, учитывая только те поля, где @ToString имеет значение YES.

Задача решается созданием нескольких файлов: аннотации ToString, класса Employee и класса ToStringAnnotation.

Аннотация @Default содержит:

- ElementType.TYPE, ElementType.FIELD - аннотация может применяться только к классам и полям

- RetentionPolicy.RUNTIME - аннотация доступна во время выполнения программы

- enum Mode { YES, NO } - перечисление для управления включением/исключением

Класс Employee:

- 2 поля с именем и местом работы (1 включено, а 2 выключено в ToString)

- 2 конструктора

- 2 геттера

- Обычный toString для вывода рабочих

Класс ToStringAnnotation:

- Метод для преобразования объекта в строковое представление учитывая ToString

- Метод который определяет, должно ли поле быть включено в строковое представление

Решение задачи:

- Присвоение и проверка аннотации

- Если аннотация 'Yes', то вывод, если 'No', то исключение из вывода

- Для вывода формирование и вывод, а для исключения просто пропуск

В main создается сотрудник с именем и почтой (Значения могут быть любые), затем 2 вывода:

- Обычный toString из класса

- ToString из аннотации @ToString

Пример решения:

3 Задание

Введите имя сотрудника: Ваня

Введите название компании: Икеа

Стандартный toString(): Employee{name='Ваня', company='Икеа'}

toString с @ToString: Employee{name='Ваня'}
***

(Задача 4)

@Validate.

Разработайте аннотацию @Validate, со следующими характеристиками:

• Целью может быть ТИП или АННОТАЦИЯ

• Доступна во время исполнения программы

• Имеет обязательное свойство value, типа Class[]

Проаннотируйте класс аннотацией @Validate, передав список типов для проверки. Реализуйте обработчик, который выводит, какие классы указаны в аннотации.

Задача решается созданием нескольких файлов: аннотации @Validate, класса DataModel и класса ValidateAnnotation.

Аннотация @Validate:

- ElementType.TYPE - аннотация может применяться только к классам

- RetentionPolicy.RUNTIME - аннотация доступна во время выполнения программы

Класс User содержит:

- 2 поля (с именем и с почтой)

- 2 конструктора

- 2 геттера

- toString для вывода информации строкой

Класс ValidateAnnotation:

- Метод для анализа классов с аннотацией @Validate

Решение задачи:

- Проверка @Validate в классе

- Если есть аннотация @Validate, то выводим информацию о классе

- Если нет аннотации @Validate, то выводится сообщение "Аннотация @Validate не найдена".
 
Пример работы:

4 Задание

Найдена аннотация @Validate

Классы для проверки: 3

   1. java.lang.String (String)

   2. java.lang.Integer (Integer)

   3. User (User)
***

(Задача 5)

@Two.

Разработайте аннотацию @Two, со следующими характеристиками:

• Целью может быть ТИП

• Доступна во время исполнения программы

• Имеет два обязательных свойства: first типа String и second типа int

Проаннотируйте какой-либо класс аннотацией @Two, передав строковое и числовое значения. Реализуйте обработчик, который считывает и выводит значения этих свойств.

Задача решается созданием нескольких файлов: аннотации @Two, класса Car и класса TwoAnnotation.

Аннотация @Two содержит:

- ElementType.TYPE - аннотация может применяться только к классам

- RetentionPolicy.RUNTIME - аннотация доступна во время выполнения программы

- String first() - обязательное строковое свойство

- int second() - обязательное числовое свойство

Класс Car:

- 2 поля (название марки и год производства)

- 2 конструктора

- 2 геттера и 2 сеттера

- Метод который проверяет машину на новизну (новая = произведена в этом (2025) году)

-toString для вывода строкой

Класс TwoAnnotation содержит:

- Метод для чтения и вывода значений с аннотацией @Two

- Метод для валидации аннотации @Two и выбрасывании исключений при некорректных значениях (Проверка на ввод)

Решение задачи:

- Проверка наличия аннотации @Two

- Извлечение first и second

- Вывод значений

Пример работы:

5 Задание

Аннотация @Two:

first: Automobile

second: 2023
***

(Задача 6)

@Cache.
Разработайте аннотацию @Cache, со следующими характеристиками:

• Целью может быть ТИП

• Доступна во время исполнения программы

• Имеет необязательное свойство value, типа String[]

• Значение свойства по умолчанию: пустой массив

Проаннотируйте класс аннотацией @Cache, указав несколько кешируемых областей. Создайте обработчик, который выводит список всех кешируемых областей или сообщение, что список пуст.

Задача решается созданием нескольких файлов: аннотации @Cache, класса BankAccount и класса CacheAnnotation.

Содержимое аннотации @Cache:

- ElementType.TYPE - аннотация может применяться только к классам

- RetentionPolicy.RUNTIME - аннотация доступна во время выполнения программы

- String[] value() default {} - необязательное свойство типа массив строк с пустым массивом по умолчанию

Класс BankAccount:

- 2 поля (номер аккаунта и баланс)

- 2 конструктора

- 2 геттера и 2 сеттера

- Метод для пополнения счета

- Метод для снятие денег со счета

- Проверка возможности снятия

- toString для вывода

Класс CacheAnnotation содержит:

- Метод для обработки аннотации @Cache

Решение задачи:

- Проверка наличия аннотации @Cache

- Если есть аннотация @Cache, то вывод списка или сообщение о пустом списке

Пример выполнения:

6 Задание

Найдены кешируемые области: balance, transactions, account_info, user_data
***

1 Задание (Задача 2)

Создайте тест, используя фреймворк JUnit, который проверяет корректность вызова методов, отмеченных аннотацией @Invoke.

• Использовать Reflection API для поиска методов с аннотацией.

• Убедиться, что метод действительно выполняется без исключений.

• Проверить, что возвращаемое значение или побочный эффект соответствует ожиданиям (например, устанавливает флаг или изменяет состояние объекта).

• Тест должен использовать аннотацию @BeforeEach для подготовки тестируемого экземпляра класса

Задача решается созданием тестового класса InvokeAnnotationTest, который проверяет все аспекты работы аннотации @Invoke

Внутри класса:

- @BeforeEach: подготовка тестового окружения перед каждым тестом

- @AfterEach: восстановление системных ресурсов после тестов

- @Test методы: различные сценарии тестирования

Тесты:

1. Проверка наличия аннотации @Invoke

2. Проверка вызова метода sayHello

3. Проверка вызова метода introduce с параметрами

4. Проверка вызова метода checkAdult

5. Проверка вызова метода celebrateBirthday и изменения объекта

6. Проверка наличия всех методов

7. Проверка случая не проходящего по условию

8. Проверка обработки null объекта

Вывод:

<img width="572" height="225" alt="image" src="https://github.com/user-attachments/assets/e23e1f7b-94d4-4a86-9c0c-1e7990e818ec" />

***

(Задача 6)

Разработайте тест, используя фреймворк JUnit, проверяющий корректность обработки аннотации @Two, если её свойства заданы некорректно. Например, строковое свойство first пустое (""), а числовое second отрицательное.

• Создайте вспомогательный класс с аннотацией @Two(first = "", second = -1).

• В тесте реализуйте метод, который через Reflection считывает значения аннотации.

• Если одно из свойств нарушает ожидаемые условия (first – пустая строка, second < 0), то должен быть выброшен IllegalArgumentException.

• Используйте assertThrows() из JUnit для проверки выбрасываемого исключения.

Для решения создается 3 класса: TwoFirst, TwoSecond и TwoAnnotationTest.

Первые 2 класса содержат некорректные данные аннотации @Two.

Класс TwoFirst содержит пустую строку как первый аргумент

Класс TwoSecond содержит отрицательное значение как второй аргумент

Тестовый класс TwoAnnotationTest содержит 4 теста:

1. Проверка пустой строки в свойстве first

2. Проверка отрицательного значения в свойстве second

3. Проверка корректной аннотации

4. Проверка отсутствия аннотации

Вывод:

<img width="572" height="122" alt="image" src="https://github.com/user-attachments/assets/d1764cd0-1530-4005-9e8c-b639fcfe1a9c" />
