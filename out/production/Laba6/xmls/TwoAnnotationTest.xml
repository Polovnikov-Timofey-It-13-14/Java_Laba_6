<?xml version="1.0" encoding="UTF-8"?>
<test-class-report>
    <class>
        <name>TwoAnnotationTest</name>
        <package>default</package>
        <access-modifier>public</access-modifier>
        <type>JUnit Test Class</type>

        <imports>
            <import>org.junit.jupiter.api.Test</import>
            <import>org.junit.jupiter.api.DisplayName</import>
            <import>static org.junit.jupiter.api.Assertions.*</import>
        </imports>

        <documentation>
            <description>Тестовый класс для проверки обработки некорректной аннотации @Two</description>
        </documentation>

        <test-framework>
            <name>JUnit 5 (Jupiter)</name>
            <version>5.x</version>
        </test-framework>

        <dependencies>
            <dependency>TwoAnnotation class</dependency>
            <dependency>TwoFirst class (test data)</dependency>
            <dependency>TwoSecond class (test data)</dependency>
            <dependency>Car class (test data)</dependency>
            <dependency>String class (Java standard)</dependency>
        </dependencies>

        <test-methods>
            <test-method>
                <name>testEmptyFirstProperty</name>
                <return-type>void</return-type>
                <parameters count="0"/>
                <access>package-private</access>
                <annotations>
                    <annotation type="Test"/>
                    <annotation type="DisplayName">
                        <value>"Проверка обработки пустой строки в свойстве first"</value>
                    </annotation>
                </annotations>
                <documentation>Тест проверяет выброс исключения при пустой строке в свойстве first</documentation>

                <test-scenario>
                    <step>Вызов TwoAnnotation.validateTwoAnnotation с классом TwoFirst</step>
                    <step>Ожидание исключения IllegalArgumentException</step>
                    <step>Проверка содержания сообщения исключения</step>
                </test-scenario>

                <test-data>
                    <class>TwoFirst.class</class>
                    <expected-issue>Пустая строка в свойстве first аннотации @Two</expected-issue>
                </test-data>

                <assertions>
                    <assertion type="assertThrows">
                        <exception>IllegalArgumentException.class</exception>
                        <executable>TwoAnnotation.validateTwoAnnotation(TwoFirst.class)</executable>
                        <message>"Должно выбрасываться IllegalArgumentException для пустого свойства first"</message>
                    </assertion>
                    <assertion type="assertTrue">
                        <condition>exception.getMessage().contains("Свойство 'first' не может быть null или пустой строкой")</condition>
                        <message>"Сообщение исключения должно указывать на проблему с first"</message>
                    </assertion>
                </assertions>

                <expected-behavior>
                    <exception>IllegalArgumentException</exception>
                    <message-contains>"Свойство 'first' не может быть null или пустой строкой"</message-contains>
                </expected-behavior>
            </test-method>

            <test-method>
                <name>testNegativeSecondProperty</name>
                <return-type>void</return-type>
                <parameters count="0"/>
                <access>package-private</access>
                <annotations>
                    <annotation type="Test"/>
                    <annotation type="DisplayName">
                        <value>"Проверка обработки отрицательного значения в свойстве second"</value>
                    </annotation>
                </annotations>
                <documentation>Тест проверяет выброс исключения при отрицательном значении в свойстве second</documentation>

                <test-scenario>
                    <step>Вызов TwoAnnotation.validateTwoAnnotation с классом TwoSecond</step>
                    <step>Ожидание исключения IllegalArgumentException</step>
                    <step>Проверка содержания сообщения исключения</step>
                </test-scenario>

                <test-data>
                    <class>TwoSecond.class</class>
                    <expected-issue>Отрицательное значение в свойстве second аннотации @Two</expected-issue>
                </test-data>

                <assertions>
                    <assertion type="assertThrows">
                        <exception>IllegalArgumentException.class</exception>
                        <executable>TwoAnnotation.validateTwoAnnotation(TwoSecond.class)</executable>
                        <message>"Должно выбрасываться IllegalArgumentException для отрицательного свойства second"</message>
                    </assertion>
                    <assertion type="assertTrue">
                        <condition>exception.getMessage().contains("Свойство 'second' не может быть отрицательным")</condition>
                        <message>"Сообщение исключения должно указывать на проблему с second"</message>
                    </assertion>
                </assertions>

                <expected-behavior>
                    <exception>IllegalArgumentException</exception>
                    <message-contains>"Свойство 'second' не может быть отрицательным"</message-contains>
                </expected-behavior>
            </test-method>

            <test-method>
                <name>testValidAnnotation</name>
                <return-type>void</return-type>
                <parameters count="0"/>
                <access>package-private</access>
                <annotations>
                    <annotation type="Test"/>
                    <annotation type="DisplayName">
                        <value>"Проверка корректной обработки валидной аннотации"</value>
                    </annotation>
                </annotations>
                <documentation>Тест проверяет корректную обработку валидной аннотации</documentation>

                <test-scenario>
                    <step>Вызов TwoAnnotation.validateTwoAnnotation с классом Car</step>
                    <step>Проверка отсутствия исключений</step>
                </test-scenario>

                <test-data>
                    <class>Car.class</class>
                    <expected-behavior>Корректная аннотация @Two(first = "Automobile", second = 2023)</expected-behavior>
                </test-data>

                <assertions>
                    <assertion type="assertDoesNotThrow">
                        <executable>TwoAnnotation.validateTwoAnnotation(Car.class)</executable>
                        <message>"Валидация должна проходить успешно для корректной аннотации @Two"</message>
                    </assertion>
                </assertions>

                <expected-behavior>
                    <exception>None</exception>
                    <result>Успешное выполнение без исключений</result>
                </expected-behavior>
            </test-method>

            <test-method>
                <name>testClassWithoutAnnotation</name>
                <return-type>void</return-type>
                <parameters count="0"/>
                <access>package-private</access>
                <annotations>
                    <annotation type="Test"/>
                    <annotation type="DisplayName">
                        <value>"Проверка обработки класса без аннотации @Two"</value>
                    </annotation>
                </annotations>
                <documentation>Тест проверяет обработку класса без аннотации @Two</documentation>

                <test-scenario>
                    <step>Вызов TwoAnnotation.validateTwoAnnotation с классом String</step>
                    <step>Ожидание исключения IllegalArgumentException</step>
                    <step>Проверка содержания сообщения исключения</step>
                </test-scenario>

                <test-data>
                    <class>String.class</class>
                    <expected-issue>Отсутствие аннотации @Two на классе</expected-issue>
                </test-data>

                <assertions>
                    <assertion type="assertThrows">
                        <exception>IllegalArgumentException.class</exception>
                        <executable>TwoAnnotation.validateTwoAnnotation(String.class)</executable>
                        <message>"Должно выбрасываться IllegalArgumentException для класса без аннотации @Two"</message>
                    </assertion>
                    <assertion type="assertTrue">
                        <condition>exception.getMessage().contains("не содержит аннотацию @Two")</condition>
                        <message>"Сообщение исключения должно указывать на отсутствие аннотации"</message>
                    </assertion>
                </assertions>

                <expected-behavior>
                    <exception>IllegalArgumentException</exception>
                    <message-contains>"не содержит аннотацию @Two"</message-contains>
                </expected-behavior>
            </test-method>
        </test-methods>

        <test-categories>
            <category name="Exception Testing">3 tests</category>
            <category name="Positive Testing">1 test</category>
            <category name="Annotation Validation">4 tests</category>
        </test-categories>

        <testing-patterns>
            <pattern>Arrange-Act-Assert (AAA)</pattern>
            <pattern>Exception Testing with assertThrows</pattern>
            <pattern>Positive and Negative Testing</pattern>
            <pattern>Message Content Verification</pattern>
        </testing-patterns>

        <coverage-areas>
            <area>Валидация пустой строки в аннотации</area>
            <area>Валидация отрицательных чисел в аннотации</area>
            <area>Обработка корректных аннотаций</area>
            <area>Обработка отсутствия аннотации</area>
            <area>Проверка содержания сообщений исключений</area>
        </coverage-areas>

        <quality-metrics>
            <metric name="Test Coverage">Comprehensive</metric>
            <metric name="Exception Handling">Thorough</metric>
            <metric name="Readability">High</metric>
            <metric name="Maintainability">High</metric>
        </quality-metrics>
    </class>
</test-class-report>